#### **字段类型**

---

数据配方工作表内，提供的字段类型主要有三种：

* 日期（时间）
* 文本（字符串）
* 数值

**时间类型字段（date）**

表示该字段的值是日期或者时间（特殊情况下为时间戳），系统自动判断为时间类型，并在字段前标注“D”的图标。时间类型字段支持使用计算函数，在图表配置中主要作为维度进行数据分析（有时候也可以作为数值）。  
举例：以下类型均可以被判断为时间类型 <br/>    
     "2017-01-01 0:00:00" <br/>    
     "2017.01.01 0:00:00" <br/>  
     "2017/01/01 0:00:00" <br/> 
     "2017年1月1日"

**文本类型字段（text）**

表示该字段的值是一个字符串，记录的是一些文本信息。系统默认将数据库中的string，text等字段判断为文本类型，例如一些地址，设备名称，用户名等，并在字段前标注“T”的图标。文本类型支持使用计算函数，在图表配置中作为维度或者数值进行数据分析。  
举例：以下类型均可以被判断为文本类型  
     ”微信公众号“  
     ”This is paper“  
     ”DC-12345“  
     ”1094\*324“  
     ”168.192.1.1“

**数值类型字段（num）**

表示该字段的值是一个数值或者数字。系统默认将数据库中的int，double，numeric等字段类型判断为数值类型。例如一些充值金额，天气温度等，并在字段前标注“N”的图标。文本类型支持使用计算函数，在图表配置中作为维度或者数值进行数据分析。  
举例：以下类型均可以被判断为数值类型  
     ”124.1“  
     ”-12“  
     ”143253462“  
     ”89%“  
**注意：**"1490753296"，时间戳默认识别为整型（即数值），可以通过后台设置将时间类型，如下图所示，转到”字段设置“页面：  
![](/assets/时间戳转化.png)

**添加计算字段**

在产品分析或者相关企业数据审核中，经常会使用到一些特定的计算指标。数据配方提供了添加计算字段的功能，支持利用几十种的计算函数对字段进行计算得到需要的字段。

添加计算字段主要包含以下几个步骤：

1. 确定指标的来源，选择指定工作表；
2. 添加指标，在工作表数据预览Tab下，点击添加计算字段，设置需要添加的字段名称，字段类型，以及计算公式。用户在添加计算公式后，系统自动判断公式的有效性，并提示计算公式是否正确。
3. 检测添加字段的正确性。
   添加的计算字段生成后，可以在该工作表的数据预览页面找到该字段的数据，检验字段值的准确性，以及是否符合预期结果。

![](/assets/添加计算字段.png)

\(不同的字段类型有对应的计算函数处理，每个计算函数，有使用说明和用例。\)

#### **创建关联表**

---

_{何为关联，订单数据中一般只存取了用户的ID，并没有用户的基本信息，如果想要分析商品的用户画像，则需要将订单表和用户基本信息表借助两表共有的用户id可汇总成一张新表，对这张新表进行分析即可得到商品的用户画像。这个操作就是关联}_

DataCF的关联支持一对一的关联合表，也支持一对多表的关联合表。关联支持三种形式：

* Left join：左关联，表示以左表为主表进行关联操作。显示左表中的所有记录,不管是否与关联条件相匹配,而右表中的数据只显示与关联条件相匹配的记录；
* Inner join：等值关联，表示对两表取交集，只返回两个表中联结字段相等的行；
* Full join：全关联，表示对两表取并集。返回两表中所有数据，不管是否匹配。

创建关联表主要包括以下几个步骤：

1. 进入创建关联表的操作页面，在工作表数据预览页面，点击页面右上角的创建关联表进入操作页面。
2. 选择关联的表，关联方式和关联字段设置。选择页面左侧需要关联的工作表，将其拖拽到右侧工作区，调整设置需要显示的关联表的字段内容。

3. 对新生成的关联表进行命名以及保存。

![](/assets/关联表计算.png)

#### **工作表管理**

---

**数据预览**

用户可以在定制统计下，工作列表页选取相应的工作表进行预览，每一个工作表对应的字段类型，字段名称，字段值，用户都可以在预览页面进行查看。

![](/assets/数据预览.png)

如果觉得表中字段过多，可以使用设置显示字段来选择显示需要的字段。

![](/assets/字段筛选.png)

**关联概况**

一张工作表可以用来配置不同的图表，在关联概况中，能够支持查看此工作表关联配置的所有的图表信息。并能够选择编辑指定的图表，并支持将图表添加到数据报表中。  
![](/assets/关联概况.png)

**字段设置**

从产品的数据库同步到数据配方后，字段名默认是和数据库的名称保持一致的，但是由于数据库的字段名只支持英文，所以很不方便使用和区分字段。定制统计-工作列表页提供了字段设置功能，用户选择想要更改的工作表，点击“字段设置”，选择需要更改的字段进行编辑。![](/assets/字段设置.png)

**工作表文件夹操作**

工作表列表页的文件夹管理，主要是方便用户对多个工作表可以做统一的分类管理。文件夹支持重命名，移动和删除操作。  
![](/assets/wenjianjia.png)

**工作表管理**

用户可以对自己上传的文件工作表，进行统一的管理操作。

![](/assets/工作表管理.png)![](/assets/工作表管理1.png)

