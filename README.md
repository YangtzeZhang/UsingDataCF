# DataCF {#datacf}

**数据配方（DataCF）**

**产品说明文档**

---------------------------------------------------------------------------------------------

1、产品介绍

数据配方DataCF——可视化分析利器，大数据分析挖掘平台！

可视化效果美观易懂，操作简单化的拖拽分析，帮助快速获取数据分析结果。

2、产品使用流程

主要分析数据流程为

① 上传数据 ② 可视化图表配置 ③ 报表功能展示

1.  数据接入

**【数据接入概况】**

数据整合接入是数据分析的第一步，数据配方平台能够方便的获取你的数据，统一数据类型，集合分散数据，简化获取流程，让你能够无需持续关注数据存储和获取的过程，专注于数据分析。

数据配方目前提供了三种方式完成数据接入，主要包括文件上传，直连数据源和调度系统同步数据：

1.  文件上传：上传本地文件进行分析，支持Excel与CSV，同时支持文件的追加、替换和下载等操作。
2.  直连数据库：最简单快捷的方式，通过平台直接连接外部数据，实现数据一键对接，简化用户获取数据过程。
3.  数据同步操作：通过面向开发者提供可编程数据拉取接口，为外部产品海量数据提供接入方案，提升数据处理速度，为用户提供更加便利的数据分析操作。

进行数据连接时，选择“定制统计”Tab，在添加数据选项中点击，选择需要添加的数据类型，则会跳转到对应的工作区域。

**【数据库】**

**数据库连接**

直接与产品的数据库连接，如本地的MySQL数据库，可以添加多个数据源。

*   配置流程，通常包含以下几步。

1.  连接配置：与外部数据连接所必要的必要信息，不同数据源需要的配置项不同。

*   服务器地址：公网可访问的数据库地址；
*   端口号：数据库端口号；
*   用户名：数据库用户名，须授权公网访问；
*   密码：与上面用户名对应的密码；
*   数据库：“ database”名称，配置后不可修改；

1.  数据表配置：部分数据源支持设置同步至数据配方的工作表，主要为数据库类。

*   介绍说明：配置过程中上方为数据源的介绍和使用须知，介绍数据源接入的具体要求。配置时右侧出现的是具体配置项的使用说明，当配置过程中某个配置项无法确定时，可查看右侧帮助。

【注意】

单表百万级别的数据，推荐同步到数据配方服务器，使用数据库连接可能出现不稳定，数据读取速度慢等情况。

**管理数据**

添加后的数据源会出现在数据源管理中，提供了多种操作辅助用户在使用中，使用过程可随时操作数据源。数据源状态及数量会随着修改、同步即时改变。

**【文件上传】**

文件数据是以文件形式保存的数据，需要经过上传导入，目前支持Excel与CSV。单个文件目前最大支持100M，可以将本地的数据，通过点击上传，也可以选择拖拽进行上传。

**上传文件**

入口在“定制统计”Tab，添加数据选项中点击，选择需要添加的文件数据类型，则会跳转到上传文件工作区域。

上传文件页面支持点击或拖拽上传

上传完成后，用户可以初步预览数据，选择表格对应的表头。

（系统默认选择工作表中的第一行字段作为表头）

上传后，可以对工作表信息进行编辑。

**文件格式要求**

*   上传数据，支持Excel和CSV两种文件。单个文件最大支持100M。
*   不支持上传空文件和表头下方无数据的文件。
*   工作表表头名称不能重复。

**异常数据**

1.  合并单元格：数据配方不支持合并单元格数据，如果存在，则默认置为空值。
2.  表头重复：表头不允许重复的名称，否则解析失败。
3.  表头处理：系统默认文件数据的第一行为表头，可以在数据预览页面选择其它行的数据作为表头。
4.  异常信息提示：文件格式错误或者空，提示无法上传/文件格式错误。
5.  数据处理

**【字段类型】**

数据配方工作表内，提供的字段类型主要有三种：

*   日期（时间）
*   文本（字符串）
*   数值

**时间类型字段（date）**

表示该字段的值是日期或者时间（特殊情况下为时间戳），系统自动判断为时间类型，并在字段前标注“D”的图标。时间类型字段支持使用计算函数，在图表配置中主要作为维度进行数据分析（有时候也可以作为数值）。

**文本类型字段（text）**

表示该字段的值是一个字符串，记录的是一些文本信息。系统默认将数据库中的string，text等字段判断为文本类型，例如一些地址，设备名称，用户名等，并在字段前标注“T”的图标。文本类型支持使用计算函数，在图表配置中作为维度或者数值进行数据分析。

**数值类型字段（num）**

表示该字段的值是一个数值或者数字。系统默认将数据库中的int，double，numeric等字段类型判断为数值类型。例如一些充值金额，天气温度等，并在字段前标注“N”的图标。文本类型支持使用计算函数，在图表配置中作为维度或者数值进行数据分析。

**添加计算字段**

在产品分析或者相关企业数据审核中，经常会使用到一些特定的计算指标。数据配方提供了添加计算字段的功能，支持利用几十种的计算函数对字段进行计算得到需要的字段。

添加计算字段主要包含以下几个步骤：

1.  确定指标的来源，选择指定工作表；
2.  添加指标，在工作表数据预览Tab下，点击添加计算字段，设置需要添加的字段名称，字段类型，以及计算公式。用户在添加计算公式后，系统自动判断公式的有效性，并提示计算公式是否正确。

(不同的字段类型有对应的计算函数处理，每个计算函数，有使用说明和用例。)

1.  检测添加字段的正确性

添加的计算字段生成后，可以在该工作表的数据预览页面找到该字段的数据，检验字段值的准确性，以及是否符合预期结果。

**【创建关联表】**

_{何为关联，订单数据中一般只存取了用户的ID，并没有用户的基本信息，如果想要分析商品的用户画像，则需要将订单表和用户基本信息表借助两表共有的用户id可汇总成一张新表，对这张新表进行分析即可得到商品的用户画像。这个操作就是关联}_

DataCF的关联支持一对一的关联合表，也支持一对多表的关联合表。关联支持三种形式：

*   Left join：左关联，表示以左表为主表进行关联操作。显示左表中的所有记录,不管是否与关联条件相匹配,而右表中的数据只显示与关联条件相匹配的记录；
*   Inner join：等值关联，表示对两表取交集，只返回两个表中联结字段相等的行；
*   Full join：全关联，表示对两表取并集。返回两表中所有数据，不管是否匹配。

创建关联表主要包括以下几个步骤：

1.  进入创建关联表的操作页面

在工作表数据预览页面，点击页面右上角的创建关联表进入操作页面。

1.  选择关联的表，关联方式和关联字段设置

选择页面左侧需要关联的工作表，将其拖拽到右侧工作区，调整设置需要显示的关联表的字段内容。

1.  对新生成的关联表进行命名以及保存

**【工作表管理】**

**数据预览**

用户可以在定制统计下，工作列表页选取相应的工作表进行预览，每一个工作表对应的字段类型，字段名称，字段值，用户都可以在预览页面进行查看。

如果觉得表中字段过多，可以使用设置显示字段来选择显示需要的字段。

**关联概况**

一张工作表可以用来关联创建新的工作表，用户可以在关联概况下查看到由此表关联的工作表；同时，支持查看此工作表关联配置的图表信息。

**字段设置**

从产品的数据库同步到数据配方后，字段名默认是和数据库的名称保持一致的，但是由于数据库的字段名只支持英文，所以很不方便使用和区分字段。定制统计-工作列表页提供了字段设置功能，用户选择想要更改的工作表，点击“字段设置”，选择需要更改的字段进行编辑。

**工作表文件夹操作**

工作表列表页的文件夹管理，主要是方便用户对多个工作表可以做统一的分类管理。文件夹支持置顶，重命名，移动和删除操作。

**工作表管理操作**

1.  可视化分析

在进入图表编辑界面后，您只需在左侧列表中选择需要分析字段，将其拖拽至维度、数值、对比、筛选器、颜色等区域，即可开始数据分析工作。

**【拖拽分析】**

对需要统计分析的字段拖拽的维度和指标区域，即可绘制出表格

如果符合突变更换规则，可以在右边工作区选择更换成不同类型的图表，确定后，即可保存图表内容。

增加维度对比，将不同的字段拖拽到此区域，展示更细维度的数据信息。

数据筛选：可以将字段拖入到筛选条件下，进行数据筛选。

**~~【维度、对比和数值】~~**

**【图表类型】**

在进行拖拽操作后，数据配方首先会自动选择最适合当前数据的图表类型，也可以根据需求切换为其他图表。

数据配方提供了丰富美观的图表类型，将数据以最合适的方式进行展示和分析。所有支持的图表类型均显示在右上方的区域，正常状态表示可以进行切换，置灰状态表示当前所选的数据不适合此图表类型。

**【数据筛选】**

数据筛选主要是帮助用户在数据分析过程中，排除不正确或不相关的数据干扰。

在数据配方产品中，主要提供两种筛选器，图内筛选器，以及全局结果筛选器。

**图内筛选器**

用户可以将需要筛选的字段，拖拽到维度，数值下方的筛选框内，设置相应的筛选条件。不同的字段类型对应不同的筛选器类型。

文本字段

当字段为文本类型时，数据配方选用两种筛选方式，一种是常规的，勾选几种类型，进行筛选符合该条件（或者排除该条件）的数据。

另一种是采用通配符的形式，设置一个根据文本判断的条件，筛选结果为符合所有条件（或者排除所选条件）的数据。

数值字段

当字段为数值字段时，可以使用条件筛选直接设置一个开区间或者闭区间。

时间字段

当字段为日期型时，默认会提供一个可选日期范围的列表，包括“今天”、“昨天”、“最近7天”、“最近30天”、“最近1年”等常用的动态时间范围或自定义的时间段。通过选择动态日期范围，DataCF将根据使用的当前时间进行动态的筛选，保证数据结果符合数据筛选需求。

如果筛选条件不是默认的动态时间，可以使用自定义时间段进行筛选。

**~~全局结果筛选器~~**

**【数据计算】**

**普通数据聚合**

求和

平均值

计数

去重计数

最大值

最小值

中位数

**~~高级计算~~**

~~环比增长值~~

~~环比增长率~~

~~留存率~~

~~活跃率~~

~~同比增长值~~

~~同比增长率~~

**~~【多层钻取】~~**

**~~【图表格式】~~**

**~~【数据预警】~~**

1.  报表展示

**【数据报表展示】**

产品分析中心，有不同的数据报表组成，每个报表中有用户自定义显示的数据图表。

功能列表

如上图所示，报表各功能入口的内容如下：

1.  数据报表管理操作
    1.  搜索功能：可以对数据报表名称进行搜索查询
    2.  添加按钮：点击弹窗可以添加新的数据报表
2.  添加图表：在当前报表中添加新的图表

全局筛选：增加图表数据筛选条件

1.  图表操作
    1.  刷新：点击更新图表数据
    2.  编辑：点击跳转到此图表的配置页面，加载原有图表编辑内容
    3.  删除：点击在当前报表删除此图表

**【数据报表布局】**

仪表盘中各个图表的位置和大小均可以自由设置，可以通过拖拽图表表头区域来进行位置调整，通过图表右下角小箭头设置图表尺寸。如下图所示。