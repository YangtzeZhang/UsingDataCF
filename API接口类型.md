### **API接口类型**

---

#### **API推送**

开发者通过API推送的形式，可以直接建立监控数据，及时呈现内容。

API是软件系统不同组成部分衔接的约定，良好的接口设计可以降低系统各部分的相互依赖，提供性能。目前开放API，用户可以通过自定义数据表及字段格式调用快速获取稳定可靠的数据。

**使用入门**

* API可以管理使用API创建的日志表，在Web端添加的日志表，无法通过API管理。
* 访问权限：API目前对所有用户开放， 使用用户名与密码登录数据配方后，在“添加数据”项目上选择API后，填写日志表字段信息，获取相对应的接口地址和Secret\_key，即可进行API使用；
* 用户凭证：数据配方使用Secret\_key作为账户的唯一凭证，Secret\_key目前不会过期，需要妥善保存；
* 账户安全：您的Secret\_key及数据配方账户的用户名和密码会通过Https加密传输；
* 数据格式：API数据传输均使用JSON格式，具体内容参见各接口；注意数据表建立后，不支持格式和字段类型的修改；
* 接口频率：当前的架构设计对于频繁的小量数据写入处理效率不高,所以建议还是尽量批量的更新数据, 但是大量的数据传输会提高等待时间,因此建议尽量将数据量控制在5万条左右。

**接口规范**

* 请求方式:
* 请求类型：
* 请求URL: API地址 + 接口地址
  ```
  实例：http://b.533y.com/_datacf.gif?type=api&aid=XXXXXXXX&tid=XXXXXX​
  ```
* 请求数据
  * 请求参数
  * 请求数据
  * 返回信息

**数据类型**

数据配方中数据支持5种数据类型，上传其它类型数据将会报错：

```
int整型，超出范围可以上传，但显示状态有差别；
double浮点型，无限制
varchar字符型
date日期数据，格式需为“%Y-%m-%d %H:%M:%S”，如“2015-01-01 00:00:00”，不规范的格式会造成计算结果不准确；
时间戳类型：需要在源点数据平台Web端进行数据转换。
```

**参数设置**

```
t：时间戳
sign：验证码（其值为md5（$Secret_key . $t））
data：数组（要插入的数据，按字段排序）
```

```
实例：http:// b.533y .com/_datacf.gif?type=api&aid=XXXXXXXX&tid=XXXXXX&t=1495420036&sign=db34lsdfjaldjflajdf&data[]=2017-04-19 11:23:22&data[]=123&data[]=test
```

**返回码**

* 如果出现“内部错误”提示字样，是系统错误，请联系系统开发人员。

* 全局返回码

---

#### **API拉取**





